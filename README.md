# 🎮 AI 预测平台跳跃游戏

> **一个能"预知未来"的2D平台游戏** - 体验AI世界模型的魅力

<div align="center">

[![游戏演示](https://img.shields.io/badge/Demo-在线试玩-brightgreen)](http://localhost:3000)
[![技术栈](https://img.shields.io/badge/Tech-Phaser.js%20%2B%20TensorFlow.js-blue)](.)
[![许可证](https://img.shields.io/badge/License-MIT-yellow)](.)

</div>

---

## 🌟 这是什么？

这是一个**特别的平台跳跃游戏**，它的特别之处在于：

**游戏不仅能让你玩，还能"猜"你下一步会做什么！**

- 🎯 **左侧屏幕**：你正在玩的真实游戏
- 🔮 **右侧屏幕**：AI预测的未来画面（未来5帧）
- 👻 **半透明轨迹**：显示AI认为你的角色会怎么移动

这就像有一个AI助手在实时模拟你的每一个动作，并告诉你"如果你跳，你会落在这里"。

---

## ✨ 核心特色

### 1. 实时AI预测
```
你按下跳跃键 → AI立即计算 → 显示5帧后的位置
                             ↓
                    半透明"幽灵"跟随预测轨迹
```

### 2. 世界模型技术
游戏内置了一个"迷你世界"的AI模型：
- 🧠 **学习物理规律**：重力、跳跃、碰撞
- 🎯 **预测状态转换**：从当前状态预测下一步
- 📊 **实时误差显示**：看AI猜得准不准

### 3. 数据收集与训练
- 📝 **边玩边学**：每一帧游戏都被记录
- 💾 **一键导出**：按`D`键下载游戏数据
- 🤖 **AI自动玩**：让AI自己玩游戏收集数据
- 🎓 **训练模型**：用Python训练更聪明的预测模型

---

## 🎮 怎么玩？

### 基础操作

| 按键 | 功能 |
|------|------|
| **← →** | 左右移动 |
| **Space** | 跳跃 |
| **D** | 下载游戏数据（用于训练） |
| **V** | 切换全屏/分屏模式 |

### 游戏目标

从起点跳到**黄色圆圈**（目标点），同时观察：
- AI预测的轨迹是否准确
- 预测误差有多大
- 自己的动作如何影响预测

---

## 🚀 快速开始

### 只想玩游戏？

```bash
# 1. 安装依赖
npm install

# 2. 启动游戏
npm run dev

# 3. 浏览器自动打开 http://localhost:3000
```

就这么简单！🎉

### 想训练自己的AI模型？

#### 第一步：收集数据

```bash
# 启动游戏
npm run dev

# 玩游戏30秒以上，按D键下载数据
# 文件会保存到你的下载文件夹
```

#### 第二步：训练模型

```bash
# 安装Python依赖
cd train
pip install -r requirements.txt

# 将下载的JSON文件放到 ../data/ 目录
# 然后训练
python train.py --data ../data/training_data.json --epochs 100

# 转换为浏览器格式
python convert_to_tfjs.py \
  --input ./saved_model \
  --output ../public/models/dynamics-model
```

#### 第三步：查看效果

刷新浏览器，AI现在会用你训练的模型预测！

---

## 🎨 游戏画面

### 分屏模式（默认）

```
┌────────────────────────────────────────┐
│  真实游戏        │  AI预测（未来5帧）  │
├──────────────────┼────────────────────┤
│                  │                     │
│   🟥 (你)        │  👻→👻→👻→👻→👻  │
│                  │  (半透明预测轨迹)   │
│   ▬▬▬▬          │  ▬▬▬▬              │
│      ▬▬▬▬        │     ▬▬▬▬           │
│         ▬▬▬▬     │        ▬▬▬▬        │
│  🟡 (目标)       │  🟡                │
│                  │                     │
│ 操作: ← → Space  │  误差: 2.3px       │
└──────────────────┴────────────────────┘
```

### 信息显示

```
帧数: 1234
位置: (245, 350)
速度: (200, -150)
动作: jump
着地: 否
预测误差:
  位置: 2.34 px
  速度: 5.67 px/s
```

---

## 🛠️ 技术实现（简化版）

### 核心技术栈

```
前端游戏: Phaser.js (游戏引擎)
     ↓
状态编码: 位置、速度 → 数值向量
     ↓
AI预测: TensorFlow.js (神经网络)
     ↓
可视化: Canvas双相机渲染
```

### 工作原理

1. **状态编码**：游戏状态 → 24维数值向量
   ```
   [x, y, vx, vy, onGround, facingRight, action, ...]
   ```

2. **神经网络预测**：
   ```
   输入(30维) → 神经网络 → 输出(6维)
   当前状态+动作 → [128→128→64] → 下一帧状态
   ```

3. **多步预测**：
   ```
   预测第1帧 → 作为输入预测第2帧 → ... → 第5帧
   ```

4. **实时渲染**：
   - 左相机：渲染真实游戏
   - 右相机：渲染预测结果
   - Graphics：绘制轨迹线和箭头

---

## 📊 项目结构

```
mirror_chunyun/
│
├─ 🎮 游戏代码 (src/)
│  ├─ game/          # 基础游戏引擎
│  ├─ model/         # AI模型（编码器、预测器）
│  ├─ tools/         # 数据收集、AI玩家
│  └─ ui/            # 可视化（分屏、轨迹）
│
├─ 🐍 训练脚本 (train/)
│  ├─ train.py       # 主训练脚本
│  ├─ model.py       # 神经网络定义
│  └─ convert.py     # 模型格式转换
│
├─ 📚 文档 (docs/)
│  └─ 6个模块的详细设计文档
│
├─ 📦 配置文件
│  ├─ package.json   # Node.js依赖
│  ├─ tsconfig.json  # TypeScript配置
│  └─ vite.config.ts # 开发服务器
│
└─ 📁 数据目录
   ├─ data/          # 训练数据
   └─ public/models/ # 训练好的模型
```

**总代码量：** ~7330行
**总文件数：** 29个文件

---

## 🎯 应用场景

### 1. 教育展示
- 演示AI如何学习物理规律
- 可视化神经网络预测过程
- 理解世界模型（World Model）概念

### 2. 游戏辅助
- 显示跳跃落点预测
- 帮助玩家规划路线
- 自动难度调整

### 3. AI研究
- 测试不同模型架构
- 研究状态预测算法
- 对比真实物理vs学习物理

### 4. 互动艺术
- 实时可视化AI思考过程
- 展示人机交互
- 创意编程作品

---

## 🔮 未来可能性

### 短期计划
- [ ] 添加更多关卡（10+）
- [ ] 改进AI预测精度
- [ ] 支持移动端操作
- [ ] 添加音效和音乐

### 中期计划
- [ ] 多人联机模式
- [ ] 关卡编辑器
- [ ] 排行榜系统
- [ ] 成就系统

### 长期愿景
- [ ] 强化学习AI自动通关
- [ ] 程序化生成无限关卡
- [ ] VR/AR版本
- [ ] 社区分享平台

---

## 💡 为什么做这个项目？

**传统游戏：** 玩家 → 游戏反馈
**这个游戏：** 玩家 → 游戏反馈 + **AI预测未来**

这是对"世界模型"概念的一次探索：
> 如果AI能理解游戏的物理规律，它就能预测未来。
> 如果AI能预测未来，它就能做出更好的决策。

这个小游戏是一个**可视化、可交互的AI实验**，让每个人都能：
- 👀 **看到** AI如何思考
- 🎮 **体验** AI预测的准确性
- 🔬 **实验** 不同的训练数据和模型

---

## 📚 详细文档

想深入了解技术实现？查看完整文档：

- [项目初始化指南](./docs/00-项目初始化指南.md)
- [Module 1: 基础游戏引擎](./docs/01-Module1-基础游戏引擎.md)
- [Module 2: 状态编码器](./docs/02-Module2-状态编码器.md)
- [Module 3: 动态预测模型](./docs/03-Module3-动态预测模型.md)
- [Module 4: 数据收集工具](./docs/04-Module4-数据收集工具.md)
- [Module 5: 模型训练脚本](./docs/05-Module5-模型训练脚本.md)
- [Module 6: 预测可视化](./docs/06-Module6-预测可视化.md)

---

## 🙏 致谢

**技术栈：**
- [Phaser.js](https://phaser.io/) - 强大的2D游戏引擎
- [TensorFlow.js](https://www.tensorflow.org/js) - 浏览器端机器学习
- [Vite](https://vitejs.dev/) - 快速的开发服务器

**灵感来源：**
- David Ha 的 [World Models](https://worldmodels.github.io/) 论文
- DeepMind 的强化学习研究
- 平台跳跃游戏经典设计

---

<div align="center">

**🎮 开始你的AI预测之旅！**

[立即开始](#-快速开始) • [查看文档](./docs/) • [技术细节](#-技术实现简化版)

Made with ❤️ and 🤖

</div>
